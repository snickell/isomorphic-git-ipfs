!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.InterfaceDatastore=e():t.InterfaceDatastore=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=6)}([function(t,e,r){"use strict";function n(t){return new u(t)}function o(t){return function(){return new i(t.apply(this,arguments))}}function i(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,l=a instanceof u;Promise.resolve(l?a.wrapped:a).then((function(t){l?n("return"===e?"return":"next",t):o(i.done?"return":"normal",t)}),(function(t){n("throw",t)}))}catch(s){o("throw",s)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise((function(i,u){var a={key:t,arg:o,resolve:i,reject:u,next:null};r?r=r.next=a:(e=r=a,n(t,o))}))},"function"!=typeof t.return&&(this.return=void 0)}function u(t){this.wrapped=t}function a(t){var e;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(e=t[Symbol.asyncIterator]))return e.call(t);if(Symbol.iterator&&null!=(e=t[Symbol.iterator]))return e.call(t)}throw new TypeError("Object is not async iterable")}"function"==typeof Symbol&&Symbol.asyncIterator&&(i.prototype[Symbol.asyncIterator]=function(){return this}),i.prototype.next=function(t){return this._invoke("next",t)},i.prototype.throw=function(t){return this._invoke("throw",t)},i.prototype.return=function(t){return this._invoke("return",t)};const l=r(10),s=r(13),c=r(3);e.utf8Encoder=new s("utf8"),e.utf8Decoder=new c("utf8"),e.filter=(t,e)=>o((function*(){var r,o=!0,i=!1;try{for(var u,l,s=a(t);o=(u=yield n(s.next())).done,l=yield n(u.value),!o;o=!0){const t=l;(yield n(e(t)))&&(yield t)}}catch(c){i=!0,r=c}finally{try{o||null==s.return||(yield n(s.return()))}finally{if(i)throw r}}}))(),e.sortAll=(t,e)=>o((function*(){let r=[];var o,i=!0,u=!1;try{for(var l,s,c=a(t);i=(l=yield n(c.next())).done,s=yield n(l.value),!i;i=!0){const t=s;r.push(t)}}catch(f){u=!0,o=f}finally{try{i||null==c.return||(yield n(c.return()))}finally{if(u)throw o}}r=yield n(e(r));for(const t of r)yield t}))(),e.take=(t,e)=>o((function*(){if(e<=0)return;let r=0;var o,i=!0,u=!1;try{for(var l,s,c=a(t);i=(l=yield n(c.next())).done,s=yield n(l.value),!i;i=!0){const t=s;if(yield t,r++,r>=e)return}}catch(f){u=!0,o=f}finally{try{i||null==c.return||(yield n(c.return()))}finally{if(u)throw o}}}))(),e.map=(t,e)=>o((function*(){var r,o=!0,i=!1;try{for(var u,l,s=a(t);o=(u=yield n(s.next())).done,l=yield n(u.value),!o;o=!0){const t=l;yield e(t)}}catch(c){i=!0,r=c}finally{try{o||null==s.return||(yield n(s.return()))}finally{if(i)throw r}}}))(),e.replaceStartWith=function(t,e){const r=new RegExp("^"+e);return t.replace(r,"")},e.tmpdir=l},function(t,e,r){"use strict";const{nanoid:n}=r(8),o=r(9),{utf8Encoder:i,utf8Decoder:u}=r(0),a=r(3),l=i.encode("/"),s=l[0];class c{constructor(t,e){if("string"==typeof t)this._buf=i.encode(t);else{if(!(t instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=t}if(null==e&&(e=!0),e&&this.clean(),0===this._buf.byteLength||this._buf[0]!==s)throw new Error("Invalid key")}toString(t="utf8"){return"utf8"===t||"utf-8"===t?u.decode(this._buf):new a(t).decode(this._buf)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(t){return new f(t.join("/"))}static random(){return new f(n().replace(/-/g,""))}clean(){if(this._buf&&0!==this._buf.byteLength||(this._buf=l),this._buf[0]!==s){const t=new Uint8Array(this._buf.byteLength+1);t.fill(s,0,1),t.set(this._buf,1),this._buf=t}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===s;)this._buf=this._buf.subarray(0,-1)}less(t){const e=this.list(),r=t.list();for(let n=0;n<e.length;n++){if(r.length<n+1)return!1;const t=e[n],o=r[n];if(t<o)return!0;if(t>o)return!1}return e.length<r.length}reverse(){return c.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const t=this.namespaces();return t[t.length-1]}list(){return this.toString().split("/").slice(1)}type(){return function(t){const e=t.split(":");if(e.length<2)return"";return e.slice(0,-1).join(":")}(this.baseNamespace())}name(){return function(t){const e=t.split(":");return e[e.length-1]}(this.baseNamespace())}instance(t){return new f(this.toString()+":"+t)}path(){let t=this.parent().toString();return t.endsWith("/")||(t+="/"),t+=this.type(),new f(t)}parent(){const t=this.list();return 1===t.length?new f("/"):new f(t.slice(0,-1).join("/"))}child(t){return"/"===this.toString()?t:"/"===t.toString()?this:new f(this.toString()+t.toString(),!1)}isAncestorOf(t){return t.toString()!==this.toString()&&t.toString().startsWith(this.toString())}isDecendantOf(t){return t.toString()!==this.toString()&&this.toString().startsWith(t.toString())}isTopLevel(){return 1===this.list().length}concat(...t){return c.withNamespaces([...this.namespaces(),...(e=t.map(t=>t.namespaces()),[].concat(...e))]);var e}}const f=o(c,{className:"Key",symbolName:"@ipfs/interface-datastore/key"});t.exports=f},function(t,e,r){"use strict";"object"!=typeof globalThis&&(Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__),t.exports=globalThis},function(t,e,r){"use strict";t.exports=r(2).TextDecoder},function(t,e,r){"use strict";function n(t){return new u(t)}function o(t){return function(){return new i(t.apply(this,arguments))}}function i(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,l=a instanceof u;Promise.resolve(l?a.wrapped:a).then((function(t){l?n("return"===e?"return":"next",t):o(i.done?"return":"normal",t)}),(function(t){n("throw",t)}))}catch(s){o("throw",s)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise((function(i,u){var a={key:t,arg:o,resolve:i,reject:u,next:null};r?r=r.next=a:(e=r=a,n(t,o))}))},"function"!=typeof t.return&&(this.return=void 0)}function u(t){this.wrapped=t}function a(t){var e;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(e=t[Symbol.asyncIterator]))return e.call(t);if(Symbol.iterator&&null!=(e=t[Symbol.iterator]))return e.call(t)}throw new TypeError("Object is not async iterable")}"function"==typeof Symbol&&Symbol.asyncIterator&&(i.prototype[Symbol.asyncIterator]=function(){return this}),i.prototype.next=function(t){return this._invoke("next",t)},i.prototype.throw=function(t){return this._invoke("throw",t)},i.prototype.return=function(t){return this._invoke("return",t)};const{filter:l,sortAll:s,take:c,map:f}=r(0),y=r(15);t.exports=class{async open(){}async close(){}async put(t,e,r={}){}putMany(t,e={}){var r=this;return o((function*(){var o,i=!0,u=!1;try{for(var l,s,c=a(t);i=(l=yield n(c.next())).done,s=yield n(l.value),!i;i=!0){const{key:t,value:o}=s;yield n(r.put(t,o,e)),yield{key:t,value:o}}}catch(f){u=!0,o=f}finally{try{i||null==c.return||(yield n(c.return()))}finally{if(u)throw o}}}))()}async get(t,e={}){}getMany(t,e={}){var r=this;return o((function*(){var o,i=!0,u=!1;try{for(var l,s,c=a(t);i=(l=yield n(c.next())).done,s=yield n(l.value),!i;i=!0){const t=s;yield r.get(t,e)}}catch(f){u=!0,o=f}finally{try{i||null==c.return||(yield n(c.return()))}finally{if(u)throw o}}}))()}async has(t){}async delete(t,e={}){}deleteMany(t,e={}){var r=this;return o((function*(){var o,i=!0,u=!1;try{for(var l,s,c=a(t);i=(l=yield n(c.next())).done,s=yield n(l.value),!i;i=!0){const t=s;yield n(r.delete(t,e)),yield t}}catch(f){u=!0,o=f}finally{try{i||null==c.return||(yield n(c.return()))}finally{if(u)throw o}}}))()}batch(){let t=[],e=[];return{put(e,r){t.push({key:e,value:r})},delete(t){e.push(t)},commit:async r=>{await y(this.putMany(t,r)),t=[],await y(this.deleteMany(e,r)),e=[]}}}_all(t,e){return o((function*(){}))()}query(t,e){var r=this;return o((function*(){let o=r._all(t,e);if(null!=t.prefix&&(o=l(o,e=>e.key.toString().startsWith(t.prefix))),Array.isArray(t.filters)&&(o=t.filters.reduce((t,e)=>l(t,e),o)),Array.isArray(t.orders)&&(o=t.orders.reduce((t,e)=>s(t,e),o)),null!=t.offset){let e=0;o=l(o,()=>e++>=t.offset)}null!=t.limit&&(o=c(o,t.limit)),!0===t.keysOnly&&(o=f(o,t=>({key:t.key}))),yield*function(t,e){var r={},n=!1;function o(r,o){return n=!0,o=new Promise((function(e){e(t[r](o))})),{done:!1,value:e(o)}}return"function"==typeof Symbol&&Symbol.iterator&&(r[Symbol.iterator]=function(){return this}),r.next=function(t){return n?(n=!1,t):o("next",t)},"function"==typeof t.throw&&(r.throw=function(t){if(n)throw n=!1,t;return o("throw",t)}),"function"==typeof t.return&&(r.return=function(t){return n?(n=!1,t):o("return",t)}),r}(a(o),n)}))()}}},function(t,e,r){"use strict";const n=r(16);t.exports.dbOpenFailedError=t=>(t=t||new Error("Cannot open database"),n(t,"ERR_DB_OPEN_FAILED")),t.exports.dbDeleteFailedError=t=>(t=t||new Error("Delete failed"),n(t,"ERR_DB_DELETE_FAILED")),t.exports.dbWriteFailedError=t=>(t=t||new Error("Write failed"),n(t,"ERR_DB_WRITE_FAILED")),t.exports.notFoundError=t=>(t=t||new Error("Not Found"),n(t,"ERR_NOT_FOUND")),t.exports.abortedError=t=>(t=t||new Error("Aborted"),n(t,"ERR_ABORTED"))},function(t,e,r){t.exports=r(7)},function(t,e,r){"use strict";const n=r(1),o=r(14),i=r(0),u=r(5),a=r(4);e.Key=n,e.MemoryDatastore=o,e.utils=i,e.Errors=u,e.Adapter=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.random=e.urlAlphabet=e.customRandom=e.customAlphabet=e.nanoid=void 0;e.urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW";let n=t=>crypto.getRandomValues(new Uint8Array(t));e.random=n;let o=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,o=-~(1.6*n*e/t.length);return()=>{let i="";for(;;){let u=r(o),a=o;for(;a--;)if(i+=t[u[a]&n]||"",i.length===+e)return i}}};e.customRandom=o;e.customAlphabet=(t,e)=>o(t,e,n);e.nanoid=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let n=63&r[t];e+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return e}},function(t,e,r){"use strict";t.exports=function(t,{className:e,symbolName:r}){const n=Symbol.for(r),o={[e]:class extends t{constructor(...t){super(...t),Object.defineProperty(this,n,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return o["is"+e]=t=>!(!t||!t[n]),o},t.exports.proto=function(t,{className:e,symbolName:r,withoutNew:n}){const o=Symbol.for(r),i={[e]:function(...e){if(n&&!(this instanceof i))return new i(...e);const r=t.call(this,...e)||this;return r&&!r[o]&&Object.defineProperty(r,o,{value:!0}),r}}[e];return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,Object.defineProperty(i.prototype,Symbol.toStringTag,{get:()=>e}),i["is"+e]=t=>!(!t||!t[o]),i}},function(t,e,r){"use strict";const{nanoid:n}=r(11);t.exports=(t=(t=>t))=>t(n())},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"urlAlphabet",{enumerable:!0,get:function(){return n.urlAlphabet}}),e.random=e.customRandom=e.customAlphabet=e.nanoid=void 0;var n=r(12);let o=t=>crypto.getRandomValues(new Uint8Array(t));e.random=o;let i=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,o=-~(1.6*n*e/t.length);return()=>{let i="";for(;;){let u=r(o),a=o;for(;a--;)if(i+=t[u[a]&n]||"",i.length===+e)return i}}};e.customRandom=i;e.customAlphabet=(t,e)=>i(t,e,o);e.nanoid=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let n=63&r[t];e+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.urlAlphabet=void 0;e.urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"},function(t,e,r){"use strict";t.exports=r(2).TextEncoder},function(t,e,r){"use strict";const n=r(1),o=r(4),i=r(5);t.exports=class extends o{constructor(){super(),this.data={}}async put(t,e){this.data[t.toString()]=e}async get(t){if(!await this.has(t))throw i.notFoundError();return this.data[t.toString()]}async has(t){return void 0!==this.data[t.toString()]}async delete(t){delete this.data[t.toString()]}*_all(){yield*Object.entries(this.data).map(([t,e])=>({key:new n(t),value:e}))}}},function(t,e,r){"use strict";t.exports=async t=>{var e,r=!0,n=!1;try{for(var o,i=function(t){var e;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(e=t[Symbol.asyncIterator]))return e.call(t);if(Symbol.iterator&&null!=(e=t[Symbol.iterator]))return e.call(t)}throw new TypeError("Object is not async iterable")}(t);r=(o=await i.next()).done,await o.value,!r;r=!0){}}catch(u){n=!0,e=u}finally{try{r||null==i.return||await i.return()}finally{if(n)throw e}}}},function(t,e,r){"use strict";function n(t,e,r){var n;Object.isFrozen(t)||(n=Object.getOwnPropertyDescriptor(t,e))&&!n.writable||(t[e]=r)}t.exports=function(t,e,r){var o;if(!(t instanceof Error))throw new TypeError("Please pass an Error to err-code");if("object"==typeof e?r=e:null!=e&&n(t,"code",e),r)for(o in r)n(t,o,r[o]);return t}}])}));